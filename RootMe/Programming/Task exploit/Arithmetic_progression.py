from requests import Session
from bs4 import BeautifulSoup as bs
import re

with Session() as s:
	task = s.get('http://challenge01.root-me.org/programmation/ch1/')
	
	bs_content = bs(task.content, 'html.parser')
	for formuls in bs_content.find_all('sub'):
		text = bs_content.get_text()
		print(text)

		un = re.findall(r'(?<=\[).+?(?=\])', text)
		num1 = un[0]
		num2 = un[1]
		num1 = int(num1.split('+')[0])
		num2 = int(num2.split('*')[1])
		u0 = re.findall(r'(?<=U0 \= ).+', text)
		u0 = int(u0[0])
		print('U0 = ' + str(u0))
		n = re.findall(r'(?<=You must find U).+(?=You)', text)
		n = int(n[0])
		print('n = ' + str(n))
		un = u0	
		for i in range (0,n):
			ans = (num1 + un) + (i * num2) 
			un = ans
		break

finish = s.post('http://challenge01.root-me.org/programmation/ch1/ep1_v.php?result='+ str(ans))	
print(finish.content)
print(ans)