from pwn import *
import time

host = "irc.root-me.org"
port = 6667
protocol = b"IRC"
channel = b"#root-me_challenge"
bot = b"candy"

def connect():
	conn = remote(host, port)
	conn.send(b'NICK b0ringdream \r\n')
	time.sleep(1)
	conn.send(b'USER b0ringdream irc.root-me.org root-me :MyBot \r\n')
	time.sleep(1)
	conn.send(b'JOIN ' + channel + b'\n')
	
	while True:
		conn.send(b'PRIVMSG ' + bot + b' !ep1\n')
		time.sleep(0.1)
		try:
			text = conn.recv(7000).decode('UTF-8')
			print(text)
			time.sleep(0.1)
			if text.find('/') > -1:
				try:
					print('ANSWER ')
					text = text[(text[1:].find(':'))+2:]
					text = text[:text.find('.')]
					print(text)
					num1 = int(text[:text.find('/')])
					num2 = int(text[(text.find('/'))+1:])
					print(num1)
					print(num2)
					ans = str(round(math.sqrt(num1)*num2,2))
					ans = bytes(str(ans).encode("UTF-8"))
					print(ans)
					conn.send(b'PRIVMSG ' + bot + b' !ep1 -rep ' + ans + b'\n')
					print(conn.recv(7000).decode('UTF-8'))
					conn.send(b'QUIT: ')
					break

				except:	
					print('Error')
		except Exception:
			pass

connect()
